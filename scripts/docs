#!/bin/env bash

nvim -u tests/minit.lua --headless +'lua require("snacks.docs").build()' +qa

echo -e "\n\nGenerating Vim Help"

if [ "$GITHUB_ACTIONS" = "true" ]; then
  exit 0
fi

PANVIMDOC=~/projects/panvimdoc

for f in docs/*.md; do
  $PANVIMDOC/panvimdoc.sh --project-name "snacks.nvim-$(basename "$f" .md)" --input-file "$f" --vim-version "Neovim" --demojify "true"
done
